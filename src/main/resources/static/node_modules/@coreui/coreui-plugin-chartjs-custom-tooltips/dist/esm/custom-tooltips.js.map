{"version":3,"file":"custom-tooltips.js","sources":["../../js/custom-tooltips.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * CoreUI Plugins - Custom Tooltips for Chart.js (v1.2.0): custom-tooltips.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\nfunction CustomTooltips(tooltipModel) {\n  // Add unique id if not exist\n  const _setCanvasId = () => {\n    const _idMaker = () => {\n      const _hex = 16\n      const _multiplier = 0x10000\n      return ((1 + Math.random()) * _multiplier | 0).toString(_hex)\n    }\n    const _canvasId = `_canvas-${_idMaker() + _idMaker()}`\n    this._chart.canvas.id = _canvasId\n    return _canvasId\n  }\n\n  const ClassName = {\n    ABOVE                   : 'above',\n    BELOW                   : 'below',\n    CHARTJS_TOOLTIP         : 'chartjs-tooltip',\n    NO_TRANSFORM            : 'no-transform',\n    TOOLTIP_BODY            : 'tooltip-body',\n    TOOLTIP_BODY_ITEM       : 'tooltip-body-item',\n    TOOLTIP_BODY_ITEM_COLOR : 'tooltip-body-item-color',\n    TOOLTIP_BODY_ITEM_LABEL : 'tooltip-body-item-label',\n    TOOLTIP_BODY_ITEM_VALUE : 'tooltip-body-item-value',\n    TOOLTIP_HEADER          : 'tooltip-header',\n    TOOLTIP_HEADER_ITEM     : 'tooltip-header-item'\n  }\n\n  const Selector = {\n    DIV     : 'div',\n    SPAN    : 'span',\n    TOOLTIP : `${this._chart.canvas.id || _setCanvasId()}-tooltip`\n  }\n\n  let tooltip = document.getElementById(Selector.TOOLTIP)\n\n  if (!tooltip) {\n    tooltip = document.createElement('div')\n    tooltip.id = Selector.TOOLTIP\n    tooltip.className = ClassName.CHARTJS_TOOLTIP\n    this._chart.canvas.parentNode.appendChild(tooltip)\n  }\n\n  // Hide if no tooltip\n  if (tooltipModel.opacity === 0) {\n    tooltip.style.opacity = 0\n    return\n  }\n\n  // Set caret Position\n  tooltip.classList.remove(ClassName.ABOVE, ClassName.BELOW, ClassName.NO_TRANSFORM)\n  if (tooltipModel.yAlign) {\n    tooltip.classList.add(tooltipModel.yAlign)\n  } else {\n    tooltip.classList.add(ClassName.NO_TRANSFORM)\n  }\n\n  // Set Text\n  if (tooltipModel.body) {\n    const titleLines = tooltipModel.title || []\n\n    const tooltipHeader = document.createElement(Selector.DIV)\n    tooltipHeader.className = ClassName.TOOLTIP_HEADER\n\n    titleLines.forEach((title) => {\n      const tooltipHeaderTitle = document.createElement(Selector.DIV)\n      tooltipHeaderTitle.className = ClassName.TOOLTIP_HEADER_ITEM\n      tooltipHeaderTitle.innerHTML = title\n      tooltipHeader.appendChild(tooltipHeaderTitle)\n    })\n\n    const tooltipBody = document.createElement(Selector.DIV)\n    tooltipBody.className = ClassName.TOOLTIP_BODY\n\n    const tooltipBodyItems = tooltipModel.body.map((item) => item.lines)\n    tooltipBodyItems.forEach((item, i) => {\n      const tooltipBodyItem = document.createElement(Selector.DIV)\n      tooltipBodyItem.className = ClassName.TOOLTIP_BODY_ITEM\n\n      const colors = tooltipModel.labelColors[i]\n\n      const tooltipBodyItemColor = document.createElement(Selector.SPAN)\n      tooltipBodyItemColor.className = ClassName.TOOLTIP_BODY_ITEM_COLOR\n      tooltipBodyItemColor.style.backgroundColor = colors.backgroundColor\n\n      tooltipBodyItem.appendChild(tooltipBodyItemColor)\n\n      if (item[0].split(':').length > 1) {\n        const tooltipBodyItemLabel = document.createElement(Selector.SPAN)\n        tooltipBodyItemLabel.className = ClassName.TOOLTIP_BODY_ITEM_LABEL\n        tooltipBodyItemLabel.innerHTML = item[0].split(': ')[0]\n\n        tooltipBodyItem.appendChild(tooltipBodyItemLabel)\n\n        const tooltipBodyItemValue = document.createElement(Selector.SPAN)\n        tooltipBodyItemValue.className = ClassName.TOOLTIP_BODY_ITEM_VALUE\n        tooltipBodyItemValue.innerHTML = item[0].split(': ').pop()\n\n        tooltipBodyItem.appendChild(tooltipBodyItemValue)\n      } else {\n        const tooltipBodyItemValue = document.createElement(Selector.SPAN)\n        tooltipBodyItemValue.className = ClassName.TOOLTIP_BODY_ITEM_VALUE\n        tooltipBodyItemValue.innerHTML = item[0]\n\n        tooltipBodyItem.appendChild(tooltipBodyItemValue)\n      }\n\n      tooltipBody.appendChild(tooltipBodyItem)\n    })\n\n    tooltip.innerHTML = ''\n\n    tooltip.appendChild(tooltipHeader)\n    tooltip.appendChild(tooltipBody)\n  }\n\n  const positionY = this._chart.canvas.offsetTop\n  const positionX = this._chart.canvas.offsetLeft\n\n  // Display, position, and set styles for font\n  tooltip.style.opacity = 1\n  tooltip.style.left = `${positionX + tooltipModel.caretX}px`\n  tooltip.style.top = `${positionY + tooltipModel.caretY}px`\n}\n\nexport default CustomTooltips\n"],"names":["CustomTooltips","tooltipModel","_setCanvasId","_idMaker","_hex","_multiplier","Math","random","toString","_canvasId","_chart","canvas","id","ClassName","Selector","tooltip","document","getElementById","TOOLTIP","createElement","className","CHARTJS_TOOLTIP","parentNode","appendChild","opacity","style","classList","remove","ABOVE","BELOW","NO_TRANSFORM","yAlign","add","body","titleLines","title","tooltipHeader","DIV","TOOLTIP_HEADER","forEach","tooltipHeaderTitle","TOOLTIP_HEADER_ITEM","innerHTML","tooltipBody","TOOLTIP_BODY","tooltipBodyItems","map","item","lines","i","tooltipBodyItem","TOOLTIP_BODY_ITEM","colors","labelColors","tooltipBodyItemColor","SPAN","TOOLTIP_BODY_ITEM_COLOR","backgroundColor","split","length","tooltipBodyItemLabel","TOOLTIP_BODY_ITEM_LABEL","tooltipBodyItemValue","TOOLTIP_BODY_ITEM_VALUE","pop","positionY","offsetTop","positionX","offsetLeft","left","caretX","top","caretY"],"mappings":"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"}